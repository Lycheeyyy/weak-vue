{"code":"//h函数的基本使用：第一个参数不一定为根组件而是元素，第二个参数是包含一些属性的对象，第三个参数为渲染的子内容（可能是文本/元素/自内容数组）\n//h(\"div\", { style: { color: \"red\" }, onClick: fn }, `hello ${proxy.state.age}`)\nimport { isArray, isObject, isString, ShapeFlags } from \"@vue/shared\";\n// 生成vnode\nexport const createVNode = (type, props, children = null) => {\n    // console.log(rootComponent, rootProps);\n    // 区分是组件的虚拟dom还是元素的虚拟dom\n    // 如果是字符串，说明是是一个普通的 HTML 元素节点；如果不是字符串且是一个对象，说明是一个组件（这里简化处理，直接默认有状态组件）\n    let shapeFlag = isString(type)\n        ? ShapeFlags.ELEMENT\n        : isObject(type)\n            ? ShapeFlags.STATEFUL_COMPONENT\n            : 0;\n    const vnode = {\n        _v_isVNode: true, //表示是一个虚拟dom\n        type,\n        props,\n        children,\n        key: props && props.key, // 后面的diff算法会用到\n        el: null, // 虚拟dom对应的真实dom\n        shapeFlag,\n    };\n    // 儿子标识\n    normalizeChildren(vnode, children);\n    return vnode;\n};\nfunction normalizeChildren(vnode, children) {\n    let type = 0;\n    if (children === null) {\n    }\n    else if (isArray(children)) {\n        // 说明该虚拟节点包含数组形式的子节点\n        type = ShapeFlags.ARRAY_CHILDREN;\n    }\n    else {\n        // 简化处理，表示该虚拟节点包含纯文本子节点\n        type = ShapeFlags.TEXT_CHILDREN;\n    }\n    //位运算（按位或 |）按位或操作会对 两个数字的二进制每一位进行比较：只要其中 有一位是 1，结果就为 1。只有两个位都为 0，结果才是 0。\n    vnode.shapeFlag = vnode.shapeFlag | type; // 可能标识会受儿子影响\n}\nexport function isVnode(vnode) {\n    return vnode._v_isVNode;\n}\n// 元素的chldren变成vnode\nexport const TEXT = Symbol(\"text\");\nexport function CVnode(child) {\n    if (isObject(child)) {\n        return child;\n    }\n    else {\n        return createVNode(TEXT, null, String(child));\n    }\n}\n//# sourceMappingURL=vnode.js.map","references":["D:/mini-vue-main/weak-vue/node_modules/.pnpm/@vue+shared@3.5.14/node_modules/@vue/shared/dist/shared.d.ts"],"map":"{\"version\":3,\"file\":\"vnode.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/runtime-core/src/vnode.ts\"],\"names\":[],\"mappings\":\"AAAA,wEAAwE;AACxE,gFAAgF;AAChF,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,MAAM,aAAa,CAAC;AACtE,UAAU;AACV,MAAM,CAAC,MAAM,WAAW,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,GAAG,IAAI,EAAE,EAAE;IACxD,yCAAyC;IAEzC,wBAAwB;IACxB,qEAAqE;IACrE,IAAI,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;QAC5B,CAAC,CAAC,UAAU,CAAC,OAAO;QACpB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC;YAChB,CAAC,CAAC,UAAU,CAAC,kBAAkB;YAC/B,CAAC,CAAC,CAAC,CAAC;IACN,MAAM,KAAK,GAAG;QACZ,UAAU,EAAE,IAAI,EAAE,YAAY;QAC9B,IAAI;QACJ,KAAK;QACL,QAAQ;QACR,GAAG,EAAE,KAAK,IAAI,KAAK,CAAC,GAAG,EAAE,eAAe;QACxC,EAAE,EAAE,IAAI,EAAE,gBAAgB;QAC1B,SAAS;KACV,CAAC;IACF,OAAO;IACP,iBAAiB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;IACnC,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEF,SAAS,iBAAiB,CAAC,KAAK,EAAE,QAAQ;IACxC,IAAI,IAAI,GAAG,CAAC,CAAC;IACb,IAAI,QAAQ,KAAK,IAAI,EAAE,CAAC;IACxB,CAAC;SAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC;QAC7B,oBAAoB;QACpB,IAAI,GAAG,UAAU,CAAC,cAAc,CAAC;IACnC,CAAC;SAAM,CAAC;QACN,uBAAuB;QACvB,IAAI,GAAG,UAAU,CAAC,aAAa,CAAC;IAClC,CAAC;IACD,wEAAwE;IACxE,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,aAAa;AACzD,CAAC;AAED,MAAM,UAAU,OAAO,CAAC,KAAK;IAC3B,OAAO,KAAK,CAAC,UAAU,CAAC;AAC1B,CAAC;AAED,oBAAoB;AACpB,MAAM,CAAC,MAAM,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;AACnC,MAAM,UAAU,MAAM,CAAC,KAAK;IAC1B,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;QACpB,OAAO,KAAK,CAAC;IACf,CAAC;SAAM,CAAC;QACN,OAAO,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IAChD,CAAC;AACH,CAAC\"}","dts":{"name":"D:/mini-vue-main/weak-vue/node_modules/.cache/rollup-plugin-typescript2/placeholder/runtime-core/src/vnode.d.ts","writeByteOrderMark":false,"text":"export declare const createVNode: (type: any, props: any, children?: any) => {\n    _v_isVNode: boolean;\n    type: any;\n    props: any;\n    children: any;\n    key: any;\n    el: any;\n    shapeFlag: number;\n};\nexport declare function isVnode(vnode: any): any;\nexport declare const TEXT: unique symbol;\nexport declare function CVnode(child: any): Record<any, any> | {\n    _v_isVNode: boolean;\n    type: any;\n    props: any;\n    children: any;\n    key: any;\n    el: any;\n    shapeFlag: number;\n};\n"}}
