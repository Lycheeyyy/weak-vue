{"code":"//为 Vue 3 的响应式系统 导入工具方法 和 准备各种响应式配置对象（handlers）\nimport { isObject } from \"@vue/shared\";\nexport const shallowReadonlyHandlers = {};\nimport { reactiveHandlers, shallowReactiveHandlers, readonlyHandlers, } from \"./baseHandlers\";\n//WeakMap 是 JavaScript 中的一个内置对象，它的主要作用是存储键值对，并且键必须是对象。与普通的 Map 不同，WeakMap 的键是 弱引用，即 当键不再被引用时，它会被垃圾回收机制自动清理。\n//所以，WeakMap 特别适合用于存储与对象生命周期相关的数据\n//WeakMap 不支持 forEach() 和迭代器方法（例如 for...of），因此无法遍历它的键值对。\nconst reactiveMap = new WeakMap();\nconst readonlyeMap = new WeakMap();\n// 核心代理实现，baseHandlers用于每个api用的代理配置，用于数据劫持具体操作（get()、set()方法）\nfunction createReactObj(target, isReadonly, baseHandlers) {\n    // 1、首先要判断对象，这个是公共的方法，放到shared包中\n    if (!isObject(target)) { //target是原始对象\n        return target;\n    }\n    // 2、核心--优化处理，已经被代理的对象不能重复代理，因此新建一个数据结构来存储\n    const proxyMap = isReadonly ? readonlyeMap : reactiveMap;\n    const proxyEs = proxyMap.get(target); //尝试从 proxyMap 中获取 target 对象的代理实例（即代理对象 proxy）\n    if (proxyEs) {\n        return proxyEs;\n    }\n    const proxy = new Proxy(target, baseHandlers); //创建了一个新的代理对象 proxy，并使用了 baseHandlers 作为拦截器\n    proxyMap.set(target, proxy); //将新的代理对象 proxy 和原始对象 target 进行关联，然后存储\n    return proxy;\n}\n//true和false代表是否是只读的\nexport function reactive(target) {\n    return createReactObj(target, false, reactiveHandlers);\n}\nexport function shallowReactive(target) {\n    return createReactObj(target, false, shallowReactiveHandlers);\n}\nexport function readonly(target) {\n    return createReactObj(target, true, readonlyHandlers);\n}\nexport function shallowReadonly(target) {\n    return createReactObj(target, true, shallowReadonlyHandlers);\n}\n//# sourceMappingURL=reactivity.js.map","references":["D:/mini-vue-main/weak-vue/node_modules/.pnpm/@vue+shared@3.5.14/node_modules/@vue/shared/dist/shared.d.ts","D:/mini-vue-main/weak-vue/packages/reactivity/src/baseHandlers.ts"],"map":"{\"version\":3,\"file\":\"reactivity.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/reactivity.ts\"],\"names\":[],\"mappings\":\"AAAA,+CAA+C;AAC/C,OAAO,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAC;AACvC,MAAM,CAAC,MAAM,uBAAuB,GAAG,EAAE,CAAC;AAC1C,OAAO,EACL,gBAAgB,EAChB,uBAAuB,EACvB,gBAAgB,GACjB,MAAM,gBAAgB,CAAC;AAGxB,2GAA2G;AAC3G,iCAAiC;AACjC,wDAAwD;AACxD,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAC;AAClC,MAAM,YAAY,GAAG,IAAI,OAAO,EAAE,CAAC;AAEnC,6DAA6D;AAC7D,SAAS,cAAc,CAAC,MAAM,EAAE,UAAU,EAAE,YAAY;IACpD,gCAAgC;IAChC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA,aAAa;QACnC,OAAO,MAAM,CAAC;IAChB,CAAC;IACD,0CAA0C;IAC1C,MAAM,QAAQ,GAAG,UAAU,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,WAAW,CAAC;IACzD,MAAM,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAA,8CAA8C;IACnF,IAAI,OAAO,EAAE,CAAC;QACZ,OAAO,OAAO,CAAC;IACjB,CAAC;IACD,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC,CAAA,2CAA2C;IACzF,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAA,sCAAsC;IAClE,OAAO,KAAK,CAAC;AACf,CAAC;AAEH,oBAAoB;AAClB,MAAM,UAAU,QAAQ,CAAC,MAAM;IAC7B,OAAO,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,gBAAgB,CAAC,CAAC;AACzD,CAAC;AACD,MAAM,UAAU,eAAe,CAAC,MAAM;IACpC,OAAO,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,uBAAuB,CAAC,CAAC;AAChE,CAAC;AACD,MAAM,UAAU,QAAQ,CAAC,MAAM;IAC7B,OAAO,cAAc,CAAC,MAAM,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAC;AACxD,CAAC;AACD,MAAM,UAAU,eAAe,CAAC,MAAM;IACpC,OAAO,cAAc,CAAC,MAAM,EAAE,IAAI,EAAE,uBAAuB,CAAC,CAAC;AAC/D,CAAC\"}","dts":{"name":"D:/mini-vue-main/weak-vue/node_modules/.cache/rollup-plugin-typescript2/placeholder/reactivity/src/reactivity.d.ts","writeByteOrderMark":false,"text":"export declare const shallowReadonlyHandlers: {};\nexport declare function reactive(target: any): any;\nexport declare function shallowReactive(target: any): any;\nexport declare function readonly(target: any): any;\nexport declare function shallowReadonly(target: any): any;\n"}}
